<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="http://258i.com/docs/markdown_res/bootstrap/css/bootstrap.min.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="http://258i.com/docs/markdown_res/bootstrap/css/bootstrap-theme.min.css" media="all" />
    <link rel="stylesheet" type="text/css" href="http://258i.com/docs/markdown_res/css/github-markdown.css" media="all" />
    <script type="text/javascript" src="http://258i.com/docs/markdown_res/js/jquery-1.9.1.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <style type="text/css" media="all">

img {max-width: 100%; }
pre, code {color: #048ebd; }
li>p {display: block;}
p>code, li>code {font-size: 13px; color: red;}
blockquote {display:block; border-left: 4px solid #abc; margin: 30px 0; padding: 11px 20px 1px;}
ul, ol{margin-left: 10px;}
ul ul,
ul ol,
ol ol,
ol ul{margin-left: 10px;}

.markdown-body {
    margin: 40px 0 0 180px;
    padding: 0 50px;
    overflow: auto;
}

@media print {
    #navbar-auto {
        display: none;
    }

    .markdown-body {
        margin-left: 40px;
        font-size: 12px;
    }

    .markdown-body blockquote {
        color: #777 !important;
        border: none;
        border-left: 4px solid #ddd;
        font-size: 12px;
    }

    .markdown-body blockquote * {
        color: #777 !important;
    }

    .markdown-body code {
        color: red !important;
    }
}

#navbar-auto {
    width: 180px;
    position: fixed;
    top: 0px;
    left: 0px;
    bottom: 0px;
    padding-right: 5px;
    box-shadow: 2px 0 3px #bbb;
    -webkit-box-shadow: 2px 0 3px #bbb;
    overflow: scroll;
    background-color: #fff;
    border-right: 2px solid #eee; 
}

#navbar-auto ul{
    list-style: none;
    margin-left: 0;
    padding-left: 0;
    padding-top: 10px;
}


.nav {
    padding-left: 0px;
}

#navbar-auto .nav > li > a {
    padding: 0;
    padding-left: 6px;
}

#navbar-auto li{
    height: 28px; 
}

#navbar-auto li.active a {
    color: #f66;
    border-left-color: #f66;
}


#navbar-auto a,
#navbar-auto a:link,
#navbar-auto a:hover,
#navbar-auto a:active,
#navbar-auto a:visited {
    display: block;
    overflow: hidden;
    border-left: 4px solid #fff;
    white-space: nowrap;
    text-overflow: ellipsis;

    text-decoration: none;
    color: #666;
    font: normal normal normal 14px/28px Arial;
}
 

    </style>
</head>
<body class="markdown-body">

<h1> test svg</h1>


<h2> d3 svg logo</h2>

<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="96" height="91">

  <clipPath id="clip">
    <path d="M0,0h7.75a45.5,45.5 0 1 1 0,91h-7.75v-20h7.75a25.5,25.5 0 1 0 0,-51h-7.75zm36.2510,0h32a27.75,27.75 0 0 1 21.331,45.5a27.75,27.75 0 0 1 -21.331,45.5h-32a53.6895,53.6895 0 0 0 18.7464,-20h13.2526a7.75,7.75 0 1 0 0,-15.5h-7.75a53.6895,53.6895 0 0 0 0,-20h7.75a7.75,7.75 0 1 0 0,-15.5h-13.2526a53.6895,53.6895 0 0 0 -18.7464,-20z"/>
  </clipPath>
  <linearGradient id="gradient-1" gradientUnits="userSpaceOnUse" x1="7" y1="64" x2="50" y2="107">
    <stop offset="0" stop-color="#f9a03c"/>
    <stop offset="1" stop-color="#f7974e"/>
  </linearGradient>
  <linearGradient id="gradient-2" gradientUnits="userSpaceOnUse" x1="2" y1="-2" x2="87" y2="84">
    <stop offset="0" stop-color="#f26d58"/>
    <stop offset="1" stop-color="#f9a03c"/>
  </linearGradient>
  <linearGradient id="gradient-3" gradientUnits="userSpaceOnUse" x1="45" y1="-10" x2="108" y2="53">
    <stop offset="0" stop-color="#b84e51"/>
    <stop offset="1" stop-color="#f68e48"/>
  </linearGradient>
  <g clip-path="url(#clip)">
    <path d="M-100,-102m-27,0v300h300z" fill="url(#gradient-1)"/>
    <path d="M-100,-102m27,0h300v300z" fill="url(#gradient-3)"/>
    <path d="M-100,-102l300,300" fill="none" stroke="url(#gradient-2)" stroke-width="40"/>
  </g>

</svg>


<h2> svg </h2>
<blockquote><p> SVG 意为可缩放矢量图形（Scalable Vector Graphics）。</p></blockquote><blockquote><p> <a href="https://www.w3.org/TR/SVG11/Overview.html">https://www.w3.org/TR/SVG11/Overview.html</a></p></blockquote>

<style type="text/css">

.test::before {
    display: block;
    text-align: right;
    padding-right: 10px;
    content: 'testing area';
    color: #bbb;
}

.test {
    margin: 15px 0;
    padding: 10px;
    cursor: pointer;
    background-color: #eee;
    border-radius: 5px;
}

.test-container span {
    display: inline-block;
    margin-right: 10px;
    margin-bottom: 10px;
    padding: 0 10px;
    border: 1px solid #bbb;
    background-color: #eee;
    color: #f00;
}

.test-panel button {
    margin: 5px;
}

.test-console {
    margin: 10px;
    padding: 5px;
    font-family: courier;
    font-size: 14px;
    line-height: 20px;
    color: #f66;
}


</style>




<h2> 前言</h2>
<p>SVG 于 2003 年 1 月 14 日成为 W3C 推荐标准。</p>
<p>参与定义 SVG 的组织有：太阳微系统、Adobe、苹果公司、IBM 以及柯达。</p>
<p>与其他图像格式相比，使用 SVG 的优势在于：</p>
<ul><li>SVG 可被非常多的工具读取和修改（比如记事本）</li>
<li>SVG 与 JPEG 和 GIF 图像比起来，尺寸更小，且可压缩性更强。</li>
<li>SVG 是可伸缩的</li>
<li>SVG 图像可在任何的分辨率下被高质量地打印</li>
<li>SVG 可在图像质量不下降的情况下被放大</li>
<li>SVG 图像中的<code>文本是可选的</code>，同时<code>也是可搜索的</code>（很适合制作地图）</li>
<li>SVG 可以与 Java 技术一起运行</li>
<li>SVG 是开放的标准</li>
<li>SVG 文件是纯粹的 XML</li></ul>
<p>SVG 的主要竞争者是 Flash。
与 Flash 相比，SVG 最大的优势是与其他标准（比如 XSL 和 DOM）相兼容。而 Flash 则是未开源的私有技术。</p>





<h2> 简单例子</h2>
<p>svg文件，以下文本内容保存成文件名为<code>circle.svg</code>的文件，就成为svg文件，可以直接打开预览了：</p>
<pre><code>&lt;?xml version="1.0" standalone="no"?>

&lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" 
"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

&lt;svg width="100%" height="100%" version="1.1"
xmlns="http://www.w3.org/2000/svg">

&lt;circle cx="100" cy="50" r="40" stroke="black"
stroke-width="2" fill="red"/>

&lt;/svg>  </code></pre>
<p>浏览器中展示圆形的svg：</p>

<svg width="100%" height="100%">

<circle 
    cx="100" 
    cy="50" 
    r="40" 
    stroke="#ff7f0e" 
    stroke-width="5" 
    fill="#2ca02c"
    />

</svg>
<p>代码如下：</p>
<pre><code>&lt;svg width="100%" height="100%">
&lt;circle 
    cx="100" 
    cy="50" 
    r="40" 
    stroke="#ff7f0e" 
    stroke-width="5" 
    fill="#2ca02c"
    />
&lt;/svg>  </code></pre>
<h2> 预定义形状（shapes）</h2>
<p>SVG 有一些预定义的形状元素，可被开发者使用和操作：</p>
<ul><li>矩形 rect</li>
<li>圆形 circle</li>
<li>椭圆 ellipse</li>
<li>线 line</li>
<li>折线 polyline</li>
<li>多边形 polygon</li>
<li>路径 path</li></ul>
<h3> 矩形</h3>

<svg width="100%" height="100%">

<rect width="300" height="100" x="200" y="20"
    style="
        fill: #8c564b;
        fill-opacity: 0.5;
        stroke-width: 1;
        stroke: rgb(0,0,0);
        stroke-opacity: 0.5;
    " />

</svg>
<p>代码如下：</p>
<pre><code>&lt;svg width="100%" height="100%">
&lt;rect width="300" height="100" x="200" y="20"
    style="
        fill: #8c564b;
        fill-opacity: 0.5;
        stroke-width: 1;
        stroke: rgb(0,0,0);
        stroke-opacity: 0.5;
    " />
&lt;/svg>  </code></pre>
<p><code>带圆角的矩形</code></p>


<svg width="100%" height="100%">

<rect width="300" height="100" x="200" y="20"
    rx="50" ry="20"
    style="
        fill: #8c564b;
        fill-opacity: 0.5;
        stroke-width: 1;
        stroke: rgb(0,0,0);
        stroke-opacity: 0.5;
    " />

</svg>
<p>代码如下：</p>
<pre><code>&lt;svg width="100%" height="100%">
&lt;rect width="300" height="100" x="200" y="20"
    rx="50" ry="20"
    style="
        fill: #8c564b;
        fill-opacity: 0.5;
        stroke-width: 1;
        stroke: rgb(0,0,0);
        stroke-opacity: 0.5;
    " />
&lt;/svg>  </code></pre>
<h3> 圆形</h3>

<svg width="100%" height="100%">

<circle 
    r="80" 
    stroke="#ff7f0e" 
    stroke-width="5" 
    fill="#2ca02c"
    />

</svg>
<p>代码如下：</p>
<p>cx，cy的值默认为0。</p>
<pre><code>&lt;svg width="100%" height="100%">
&lt;circle 
    r="100" 
    stroke="#ff7f0e" 
    stroke-width="5" 
    fill="#2ca02c"
    />
&lt;/svg>   </code></pre>
<h3> 椭圆</h3>

<svg width="100%" height="200">

<ellipse 
    cx="300" 
    cy="100" 
    rx="200" 
    ry="80"
    style="
        fill:#74c476;
        stroke:rgb(0,0,100);
        stroke-width:1;
    "/>

</svg>
<p>代码：</p>
<pre><code>&lt;svg width="100%" height="200">
&lt;ellipse 
    cx="300" 
    cy="100" 
    rx="200" 
    ry="80"
    style="
        fill:#74c476;
        stroke:rgb(0,0,100);
        stroke-width:1;
    "/>
&lt;/svg> </code></pre>
<p><code>三个叠加的椭圆</code>：</p>

<svg width="100%" height="100%">

<ellipse cx="240" cy="100" rx="220" ry="30" style="fill:#9ecae1"/>
<ellipse cx="220" cy="70" rx="190" ry="20" style="fill:#fdae6b"/>
<ellipse cx="210" cy="45" rx="170" ry="15" style="fill:#9e9ac8"/>

</svg>
<pre><code>&lt;svg width="100%" height="100%">
&lt;ellipse cx="240" cy="100" rx="220" ry="30" style="fill:#9ecae1"/>
&lt;ellipse cx="220" cy="70" rx="190" ry="20" style="fill:#fdae6b"/>
&lt;ellipse cx="210" cy="45" rx="170" ry="15" style="fill:#9e9ac8"/>
&lt;/svg>   </code></pre>
<p><code>两个组合的椭圆</code>：</p>

<svg width="100%" height="100%">

<ellipse cx="240" cy="100" rx="220" ry="30" style="fill:#7b4173"/>
<ellipse cx="220" cy="100" rx="190" ry="20" style="fill:white"/>

</svg>


<h3> 线条</h3>

<svg width="100%" height="100%">

<line 
    x1="30" y1="10" 
    x2="300" y2="100"
    style="
        stroke: #1f77b4;
        stroke-width: 4;
        stroke-opacity: 0.7;
    "/>

</svg>
<pre><code>&lt;svg width="100%" height="100%">
&lt;line 
    x1="30" y1="10" 
    x2="300" y2="100"
    style="
        stroke: #1f77b4;
        stroke-width: 4;
        stroke-opacity: 0.7;
    "/>
&lt;/svg>     </code></pre>
<h3> 折线</h3>

<svg width="100%" height="100%">

<polyline 
    points="5,0 5,20 25,20 25,40 45,40 45,60"
    style="
        fill:transparent;
        stroke:#637939;
        stroke-width:2;
    "/>
<polyline 
    points="20,0 100,10 200,40 150,70"
    style="
        fill:transparent;
        stroke:#a55194;
        stroke-width:2;
    "/>

</svg>





<h3> 多边形</h3>

<svg width="100%" height="300">


<polygon 
    points="220,100 300,210 170,250 120,120"
    style="
        fill:#cccccc;
        stroke:#000000;
        stroke-width:1;
    "/>


</svg>
<pre><code>&lt;svg width="100%" height="300">

&lt;polygon 
    points="220,100 300,210 170,250 120,120"
    style="
        fill:#cccccc;
        stroke:#000000;
        stroke-width:1;
    "/>

&lt;/svg>    </code></pre>
<h3> 文本</h3>
<blockquote><p> <a href="https://www.w3.org/TR/SVG11/text.html">https://www.w3.org/TR/SVG11/text.html</a></p></blockquote>

<svg width="100%" height="200" style="border: 1px dashed #bbb;">


<text 
    x="100"
    y="10"
    dx="10"
    dy="60"
    rotate="15"
    textLength="600"
    lengthAdjust="spacing"
    style="
        fill:#ff7f0e;
        stroke:#1f77b4;
        stroke-width:1;
        font-size:60px;
    ">SVG text
</text>

<text 
    x="100"
    y="80"
    dx="10"
    dy="60"
    rotate="15"
    textLength="600"
    lengthAdjust="spacingAndGlyphs"
    style="
        fill:#ff7f0e;
        stroke:#1f77b4;
        stroke-width:1;
        font-size:60px;
    ">SVG text
</text>

<rect
    x="97"
    y="7"
    width="7"
    height="7"
    style="
        fill: #8c564b;
        cursor: move;
        fill-opacity: 1;
        stroke-width: 1;
        stroke: rgb(0,0,0);
        stroke-opacity: 1;
    " />


</svg>

<p>代码如下：</p>
<pre><code>&lt;text 
    x="100"
    y="10"
    dx="10"
    dy="60"
    rotate="15"
    textLength="600"
    lengthAdjust="spacing"
    style="
        fill:#ff7f0e;
        stroke:#1f77b4;
        stroke-width:1;
        font-size:60px;
    ">SVG text
&lt;/text> </code></pre>
<p>关键属性：</p>
<ul><li>textLength：文本长度</li>
<li>lengthAdjust属性取值：<code>spacing|spacingAndGlyphs</code>，以上Demo正是展示了两种的不同。</li>
<li>x, y： <code>(left, bottom)</code>的坐标</li>
<li>dx, dy：偏移量</li></ul>
<p>svg的text标签没有以下类似的属性（<a href="http://stackoverflow.com/questions/15500894/background-color-of-text-in-svg">http://stackoverflow.com/questions/15500894/background-color-of-text-in-svg</a>）：</p>
<pre><code>border:1px solid #c5b0d5;
background-color:red; </code></pre>
<p>如果确实需要，只能模拟。比如绘制一个下层的矩形，并填充颜色。</p>





<h3> 路径</h3>
<blockquote><p> <a href="http://www.w3.org/TR/SVG11/paths.html">http://www.w3.org/TR/SVG11/paths.html</a></p></blockquote><p>指令：</p>
<ul><li>M = moveto</li>
<li>L = lineto</li>
<li>H = horizontal lineto</li>
<li>V = vertical lineto</li>
<li>C = curveto，三次贝塞尔曲线到</li>
<li>S = smooth curveto，光滑三次贝塞尔曲线到</li>
<li>Q = quadratic Belzier curve，二次贝塞尔曲线到</li>
<li>T = smooth quadratic Belzier curveto，光滑二次贝塞尔曲线到</li>
<li>A = elliptical Arc</li>
<li>Z = closepath</li></ul>
<p><code>指令大写表示绝对定位，小写表示相对定位</code></p>



<h4> M指令、H指令和h指令</h4>

<svg width="100%" height="100">

<path d="M30 30
    H300
    h2.786l8.179,7.089l9.633,4.544l8.725,2.182l9.814-0.909
        l1.636,1.091
    "
    style="
        fill:#eee;
        stroke:green;
        stroke-width:1
        "
    />

</svg>
<p>以下是代码，<code>注意L的小写l与1的区别</code>，仔细看是<code>横勾(l)与斜勾(1)的区别</code>。自动生成工具使用精简方式，容易造成误解。</p>

<pre><code>&lt;svg width="100%" height="300">
&lt;path d="M30 30
    H300
    h2.786l8.179,7.089l9.633,4.544l8.725,2.182l9.814-0.909
        l1.636,1.091
    "
    style="
        fill:#eee;
        stroke:green;
        stroke-width:1
        "
    />
&lt;/svg>  </code></pre>
<img src="./img/courier-l-1.png" width="260">

<h4> C指令</h4>
<p>从当前点绘制三次贝塞尔曲线到节点(x, y)。起点控制点为(x1, y1)，终点控制点为(x2, y2)。</p>
<p>参数： </p>
<pre><code>x1 y1 x2 y2 x y </code></pre>
<p>以下例子展示了三阶贝塞尔曲线，可以拖动起终点和控制点改变曲线形状。</p>

<style type="text/css">

#test_50_svg {
    border: 1px dashed #bbb;
}

</style>

<div id="test_50" class="test">
<div class="test-container">
<svg id="test_50_svg" width="100%" height="200">

</svg>
</div>
<div class="test-console"></div>
<div class="test-panel">
</div>
</div>

<script src="./static/js/svg/svg-path-curveto-demo1.js">

</script>

<h4> S指令</h4>
<p>从当前点绘制一条三次贝塞尔曲线至指定点，使用上一节点的控制点的<code>镜像节点</code>作为控制点。参数为：</p>
<pre><code>x2 y2 x y </code></pre>
<p>将以上的Demo再扩展一下，允许常规编辑功能：</p>
<ul><li>添加新点（<code>按住win-Alt或mac-option点击空白处</code>）</li>
<li>删除点（<code>按住shift点击指定点</code>）</li></ul>
<style type="text/css">

#test_60_svg {
    border: 1px dashed #bbb;
}

</style>

<div id="test_60" class="test">
<div class="test-container">
<svg id="test_60_svg" width="100%" height="400">

</svg>
</div>
<div class="test-console"></div>
<div class="test-panel">
<label><input type="checkbox" id="test_60_checkbox_1" checked="checked"> 显示辅助线</label>
<label><input type="checkbox" id="test_60_checkbox_2"> 显示坐标</label>
<label><input type="checkbox" id="test_60_checkbox_3" checked> 平滑模式</label>
</div>
</div>

<script src="./static/js/svg/svg-path-curveto-demo2.js">

</script>



<h4> Q指令</h4>
<p>从当前点绘制<code>二次贝塞尔曲线</code>至目标点(x, y)，使用(x1, y1)为控制点。参数为：</p>
<pre><code>x1 y1 x y  </code></pre>
<p>以下例子展示了二阶贝塞尔曲线，可以拖动起终点和控制点改变曲线形状。</p>

<style type="text/css">

#test_65_svg {
    border: 1px dashed #bbb;
}

</style>

<div id="test_65" class="test">
<div class="test-container">
<svg id="test_65_svg" width="100%" height="200">

</svg>
</div>
<div class="test-console"></div>
<div class="test-panel">
</div>
</div>

<script src="./static/js/svg/svg-path-curveto-demo2-5.js">

</script>



<h4> T指令</h4>
<p>从当前节点绘制<code>二次贝塞尔曲线</code>至目标点(x, y)，使用上一节点控制点的<code>镜像节点</code>作为控制点。</p>

<p>以下展示二次贝塞尔曲线，支持编辑操作同上：</p>

<style type="text/css">

#test_70_svg {
    border: 1px dashed #bbb;
}

</style>

<div id="test_70" class="test">
<div class="test-container">
<svg id="test_70_svg" width="100%" height="400">

</svg>
</div>
<div class="test-console"></div>
<div class="test-panel">
<label><input type="checkbox" id="test_70_checkbox_1" checked> 显示辅助线</label>
<label><input type="checkbox" id="test_70_checkbox_2"> 显示坐标</label>
<label><input type="checkbox" id="test_70_checkbox_3" checked> 平滑模式</label>
</div>
</div>

<script src="./static/js/svg/svg-path-curveto-demo3.js">

</script>



<p>gun</p>

<svg width="100%" height="300">

<path 
    stroke="#EFF4F1" stroke-miterlimit="10" d="
        M53.861,99.117h2.786l8.179,7.089l9.633,4.544l8.725,2.182l9.814-0.909
        l1.636,1.091c0,0,2-3.817,5.09-4.908c3.09-1.09,8.542-5.997,10.542-8.724c2-2.727,2.729-20.063,2.729-20.063l-14.723-9.27
        l-4.727-8.472c0,0-1.451-5.412,1.456-9.522s11.085-4.11,11.085-4.11L117.9,54.88l3.271-5.998l-1.273-6.473l0.181-25.264
        l6.583,0.459l2.143,7.286l18.54,0.545l4.907,3.817l55.072,0.545l8.725,6.543v2.726l45.803,0.545l8.179,1.091l3.271,5.998
        l56.709,1.091l8.179-7.089l178.304,1.091l3.271-8.725l20.175,3.817v1.636l2.727,3.817l4.361,8.179l2.727,0.545l4.362,12.269v14.995
        l-2.727,18.539l-1.636,20.175l-0.545,3.271h-3.816l-2.727,6.544l-88.879,2.727l-2.727,4.907l-95.789-0.837
        c0,0-7.634,1.817-11.269,4.726s-8.543,12.177-8.543,12.177l-0.975,21.271c0,0-4.477,10.719-7.568,14.898
        c-3.089,4.181-12.723,9.998-17.631,11.634c-4.906,1.635-49.071-0.618-49.071-0.618c-28.9,0.546-32.717,5.998-32.717,5.998
        l-43.621,135.772l1.09,23.447l-7.634,4.907l-82.881-10.905l-3.271-6.543l-29.99-8.18l0.545-14.178l-5.453-7.088l42.348-99.531
        l1.272-3.091c0,0-3.272,0.364-5.453-0.363c-2.181-0.727-4.905-4.141-4.906-6.614c-0.002-2.475,8.724-17.994,8.724-17.994
        s4.633-0.335,7.087-3.2c2.106-2.46,3.297-7.322,5.816-12.359c5.453-10.905-1.998-24.79-1.998-24.79l-11.088-9.198l-16.175-7.705
        c0,0-20.175-7.089-25.628-19.63S53.861,99.117,53.861,99.117z"/>

</svg>



<h2> 滤镜</h2>
<p>高斯模糊的椭圆形：</p>

<svg width="100%" height="160">

<defs>
<filter id="Gaussian_Blur">
<feGaussianBlur in="SourceGraphic" stdDeviation="3" />
</filter>
</defs>
<ellipse 
    cx="100" cy="80" rx="70" ry="40"
    style="
        fill:#8ca252;
        stroke:#8ca252;
        stroke-width:1;
        filter:url(#Gaussian_Blur)
    "/>

</svg>
<p>代码如下：</p>
<pre><code>&lt;svg width="100%" height="160">
&lt;defs>
&lt;filter id="Gaussian_Blur">
&lt;feGaussianBlur in="SourceGraphic" stdDeviation="3" />
&lt;/filter>
&lt;/defs>
&lt;ellipse 
    cx="100" cy="80" rx="70" ry="40"
    style="
        fill:#8ca252;
        stroke:#8ca252;
        stroke-width:1;
        filter:url(#Gaussian_Blur)
    "/>
&lt;/svg>  </code></pre>
</body>
</html>
<script type="text/javascript" src="http://258i.com/docs/markdown_res/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://258i.com/docs/markdown_res/js/scrollspy.js"></script>
<script type="text/javascript">
(function(){
document.title = $('h1').html() || '文档标题';    
})();
</script>
